{"primaryContentSections":[{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"MQTT (Message Queuing Telemetry Transport) is a lightweight messaging protocol that was developed by IBM and first released in 1999. It uses the pub\/sub pattern and translates messages between devices, servers, and applications. It is commonly used in Internet of things (IoT) technologies."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"MQTTNIO is a Swift NIO based implementation of a MQTT client. It supports"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"MQTT versions 3.1.1 and 5.0."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Unencrypted and encrypted (via TLS) connections"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"WebSocket connections"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Posix sockets"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Appleâ€™s Network framework via "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/apple\/swift-nio-transport-services"},{"type":"text","text":" (required for iOS)."}]}]}]},{"anchor":"Usage","level":2,"type":"heading","text":"Usage"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a client and connect to the MQTT broker."}]},{"type":"codeListing","syntax":"swift","code":["let client = MQTTClient(","    host: \"mqtt.eclipse.org\",","    port: 1883,","    identifier: \"My Client\",","    eventLoopGroupProvider: .createNew",")","do {","    try await client.connect()","    print(\"Succesfully connected\")","} catch {","    print(\"Error while connecting \\(error)\")","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Subscribe to a topic and add a publish listener to report publish messages sent from the server\/broker."}]},{"type":"codeListing","syntax":"swift","code":["let subscription = MQTTSubscribeInfo(topicFilter: \"my-topics\", qos: .atLeastOnce)","_ = try await client.subscribe(to: [subscription])","let listener = client.createPublishListener()","for await result in listener {","    switch result {","    case .success(let publish):","        if publish.topicName == \"my-topics\" {","            var buffer = publish.payload","            let string = buffer.readString(length: buffer.readableBytes)","            print(string)","        }","    case .failure(let error):","        print(\"Error while receiving PUBLISH event\")","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Publish to a topic."}]},{"type":"codeListing","syntax":"swift","code":["try await client.publish(","    to: \"my-topics\",","    payload: ByteBuffer(string: \"This is the Test payload\"),","    qos: .atLeastOnce",")"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"MQTTClient supports both Swift concurrency and SwiftNIO "},{"type":"codeVoice","code":"EventLoopFuture"},{"type":"text","text":". The above examples use Swift concurrency but there are equivalent versions of these functions that return "},{"type":"codeVoice","code":"EventLoopFuture"},{"type":"text","text":"s. You can find out more about Swift NIO and "},{"type":"codeVoice","code":"EventLoopFuture"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/apple.github.io\/swift-nio\/docs\/current\/NIOCore\/Classes\/EventLoopFuture.html"},{"type":"text","text":"."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/mqttnio"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"A Swift NIO based MQTT client"}],"kind":"symbol","metadata":{"roleHeading":"Framework","externalID":"MQTTNIO","title":"MQTTNIO","symbolKind":"module","role":"collection","modules":[{"name":"MQTTNIO"}]},"hierarchy":{"paths":[[]]},"topicSections":[{"title":"Articles","identifiers":["doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/mqttnio-v5","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/mqttnio-connections","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/mqttnio-aws"]},{"title":"Client","identifiers":["doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTClient"]},{"title":"Subscribe\/Publish","identifiers":["doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTSubscribeInfo","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTSuback","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTPublishInfo","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTPublishListener","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTQoS","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTPacketType"]},{"title":"Errors","identifiers":["doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTError","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTPacketError"]},{"title":"V5 Connection","identifiers":["doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTConnackV5"]},{"title":"V5 Subscribe\/Publish","identifiers":["doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTSubscribeInfoV5","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTProperties","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTReasonCode","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTAckV5","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTSubackV5","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTPublishIdListener"]},{"title":"V5 Authentication","identifiers":["doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTAuthV5"]},{"title":"TLS","identifiers":["doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/TSTLSConfiguration","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/TSTLSVersion","doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/TSCertificateVerification"]}],"references":{"doc://MQTTNIO/documentation/MQTTNIO/MQTTPublishInfo":{"role":"symbol","title":"MQTTPublishInfo","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTPublishInfo"}],"abstract":[{"type":"text","text":"MQTT PUBLISH packet parameters."}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTPublishInfo","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTPublishInfo"}],"url":"\/documentation\/mqttnio\/mqttpublishinfo"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTQoS":{"role":"symbol","title":"MQTTQoS","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTQoS"}],"abstract":[{"type":"text","text":"Indicates the level of assurance for delivery of a packet."}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTQoS","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTQoS"}],"url":"\/documentation\/mqttnio\/mqttqos"},"doc://MQTTNIO/documentation/MQTTNIO/mqttnio-connections":{"role":"article","title":"Connections","abstract":[{"type":"text","text":"Support for TLS and WebSockets."}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/mqttnio-connections","kind":"article","type":"topic","url":"\/documentation\/mqttnio\/mqttnio-connections"},"doc://MQTTNIO/documentation/MQTTNIO/TSTLSVersion":{"role":"symbol","title":"TSTLSVersion","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"TSTLSVersion"}],"abstract":[{"type":"text","text":"TLS Version enumeration"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/TSTLSVersion","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TSTLSVersion"}],"url":"\/documentation\/mqttnio\/tstlsversion"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTPublishListener":{"role":"symbol","title":"MQTTPublishListener","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTPublishListener"}],"abstract":[{"type":"text","text":"MQTT Publish message listener AsyncSequence"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTPublishListener","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTPublishListener"}],"url":"\/documentation\/mqttnio\/mqttpublishlistener"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTReasonCode":{"role":"symbol","title":"MQTTReasonCode","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTReasonCode"}],"abstract":[{"type":"text","text":"MQTT v5.0 reason codes."}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTReasonCode","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTReasonCode"}],"url":"\/documentation\/mqttnio\/mqttreasoncode"},"https://github.com/apple/swift-nio-transport-services":{"title":"NIOTransportServices","titleInlineContent":[{"type":"text","text":"NIOTransportServices"}],"type":"link","identifier":"https:\/\/github.com\/apple\/swift-nio-transport-services","url":"https:\/\/github.com\/apple\/swift-nio-transport-services"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTPacketType":{"role":"symbol","title":"MQTTPacketType","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTPacketType"}],"abstract":[{"type":"text","text":"MQTT Packet type enumeration"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTPacketType","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTPacketType"}],"url":"\/documentation\/mqttnio\/mqttpackettype"},"doc://MQTTNIO/documentation/MQTTNIO/mqttnio-aws":{"role":"article","title":"AWS IoT","abstract":[{"type":"text","text":"Using MQTTNIO with AWS IoT."}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/mqttnio-aws","kind":"article","type":"topic","url":"\/documentation\/mqttnio\/mqttnio-aws"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTSuback":{"role":"symbol","title":"MQTTSuback","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTSuback"}],"abstract":[{"type":"text","text":"MQTT Sub ACK"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTSuback","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTSuback"}],"url":"\/documentation\/mqttnio\/mqttsuback"},"doc://MQTTNIO/documentation/MQTTNIO/TSCertificateVerification":{"role":"symbol","title":"TSCertificateVerification","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"TSCertificateVerification"}],"abstract":[{"type":"text","text":"Certificate verification modes."}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/TSCertificateVerification","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TSCertificateVerification"}],"url":"\/documentation\/mqttnio\/tscertificateverification"},"doc://MQTTNIO/documentation/MQTTNIO/TSTLSConfiguration":{"role":"symbol","title":"TSTLSConfiguration","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"TSTLSConfiguration"}],"abstract":[{"type":"text","text":"TLS configuration for NIO Transport Services"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/TSTLSConfiguration","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TSTLSConfiguration"}],"url":"\/documentation\/mqttnio\/tstlsconfiguration"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTError":{"role":"symbol","title":"MQTTError","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTError"}],"abstract":[{"type":"text","text":"MQTTClient errors"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTError"}],"url":"\/documentation\/mqttnio\/mqtterror"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTAuthV5":{"role":"symbol","title":"MQTTAuthV5","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTAuthV5"}],"abstract":[{"type":"text","text":"MQTT V5 Auth packet"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTAuthV5","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTAuthV5"}],"url":"\/documentation\/mqttnio\/mqttauthv5"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTSubscribeInfo":{"role":"symbol","title":"MQTTSubscribeInfo","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTSubscribeInfo"}],"abstract":[{"type":"text","text":"MQTT SUBSCRIBE packet parameters."}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTSubscribeInfo","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTSubscribeInfo"}],"url":"\/documentation\/mqttnio\/mqttsubscribeinfo"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTProperties":{"role":"symbol","title":"MQTTProperties","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTProperties"}],"abstract":[{"type":"text","text":"MQTT v5.0 properties. A property consists of a identifier and a value"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTProperties","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTProperties"}],"url":"\/documentation\/mqttnio\/mqttproperties"},"https://apple.github.io/swift-nio/docs/current/NIOCore/Classes/EventLoopFuture.html":{"title":"here","titleInlineContent":[{"type":"text","text":"here"}],"type":"link","identifier":"https:\/\/apple.github.io\/swift-nio\/docs\/current\/NIOCore\/Classes\/EventLoopFuture.html","url":"https:\/\/apple.github.io\/swift-nio\/docs\/current\/NIOCore\/Classes\/EventLoopFuture.html"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTClient":{"role":"symbol","title":"MQTTClient","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTClient"}],"abstract":[{"type":"text","text":"Swift NIO MQTT Client"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTClient","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTClient"}],"url":"\/documentation\/mqttnio\/mqttclient"},"doc://MQTTNIO/documentation/MQTTNIO/mqttnio-v5":{"role":"article","title":"MQTT Version 5.0","abstract":[{"type":"text","text":"MQTTNIO support for MQTT v5 protocol."}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/mqttnio-v5","kind":"article","type":"topic","url":"\/documentation\/mqttnio\/mqttnio-v5"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTPublishIdListener":{"role":"symbol","title":"MQTTPublishIdListener","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTPublishIdListener"}],"abstract":[{"type":"text","text":"MQTT Publish message listener, that filters messages by subscription identifier"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTPublishIdListener","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTPublishIdListener"}],"url":"\/documentation\/mqttnio\/mqttpublishidlistener"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTAckV5":{"role":"symbol","title":"MQTTAckV5","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTAckV5"}],"abstract":[{"type":"text","text":"MQTT v5 ACK information. Returned with PUBACK, PUBREL"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTAckV5","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTAckV5"}],"url":"\/documentation\/mqttnio\/mqttackv5"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTPacketError":{"role":"symbol","title":"MQTTPacketError","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTPacketError"}],"abstract":[{"type":"text","text":"Errors generated by bad packets sent by the client"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTPacketError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTPacketError"}],"url":"\/documentation\/mqttnio\/mqttpacketerror"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTSubackV5":{"role":"symbol","title":"MQTTSubackV5","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTSubackV5"}],"abstract":[{"type":"text","text":"MQTT v5 Sub ACK packet"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTSubackV5","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTSubackV5"}],"url":"\/documentation\/mqttnio\/mqttsubackv5"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTSubscribeInfoV5":{"role":"symbol","title":"MQTTSubscribeInfoV5","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTSubscribeInfoV5"}],"abstract":[{"type":"text","text":"MQTT v5 SUBSCRIBE packet parameters."}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTSubscribeInfoV5","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTSubscribeInfoV5"}],"url":"\/documentation\/mqttnio\/mqttsubscribeinfov5"},"doc://MQTTNIO/documentation/MQTTNIO":{"role":"collection","title":"MQTTNIO","abstract":[{"type":"text","text":"A Swift NIO based MQTT client"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO","kind":"symbol","type":"topic","url":"\/documentation\/mqttnio"},"doc://MQTTNIO/documentation/MQTTNIO/MQTTConnackV5":{"role":"symbol","title":"MQTTConnackV5","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTConnackV5"}],"abstract":[{"type":"text","text":"MQTT v5 Connack"}],"identifier":"doc:\/\/MQTTNIO\/documentation\/MQTTNIO\/MQTTConnackV5","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MQTTConnackV5"}],"url":"\/documentation\/mqttnio\/mqttconnackv5"}}}